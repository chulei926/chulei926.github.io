(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{415:function(t,a,s){"use strict";s.r(a);var n=s(22),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"beans-xml加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#beans-xml加载"}},[t._v("#")]),t._v(" beans.xml加载")]),t._v(" "),s("h2",{attrs:{id:"user-java"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-java"}},[t._v("#")]),t._v(" User.java")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Serializable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" serialVersionUID "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1459763050776208272L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h2",{attrs:{id:"application-xml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-xml"}},[t._v("#")]),t._v(" application.xml")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("beans")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.springframework.org/schema/beans"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.spring.rc.leichu.model.User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("leichu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("27"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h2",{attrs:{id:"applicationbootstrap-java"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#applicationbootstrap-java"}},[t._v("#")]),t._v(" ApplicationBootstrap.java")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationBootstrap")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationContext")]),t._v(" ctx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassPathXmlApplicationContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beans.xml"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h2",{attrs:{id:"加载过程分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载过程分析"}},[t._v("#")]),t._v(" 加载过程分析")]),t._v(" "),s("ul",[s("li",[t._v("ClassPathXmlApplicationContext#"),s("strong",[t._v("ClassPathXmlApplicationContext")]),t._v("(String[], boolean, ApplicationContext)\n"),s("ul",[s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("refresh")]),t._v("（核心）\n"),s("ul",[s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("prepareRefresh")]),t._v("（环境准备：设置启动时间、设置结束标记、设置激活标记、环境校验等）")]),t._v(" "),s("li",[s("strong",[t._v("AbstractApplicationContext#obtainFreshBeanFactory")]),t._v("（获取一个新的 beanFactory。重点！复杂！）\n"),s("ul",[s("li",[t._v("AbstractRefreshableApplicationContext#"),s("strong",[t._v("refreshBeanFactory")]),t._v(" "),s("ul",[s("li",[t._v("AbstractRefreshableApplicationContext#"),s("strong",[t._v("createBeanFactory")])]),t._v(" "),s("li",[t._v("AbstractRefreshableApplicationContext#"),s("strong",[t._v("customizeBeanFactory")])]),t._v(" "),s("li",[s("strong",[t._v("AbstractRefreshableApplicationContext#loadBeanDefinitions")])])])]),t._v(" "),s("li",[t._v("AbstractRefreshableApplicationContext#"),s("strong",[t._v("getBeanFactory")])])])]),t._v(" "),s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("prepareBeanFactory")]),t._v("（对 beanFactory 进行初始化配置）")]),t._v(" "),s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("invokeBeanFactoryPostProcessors")]),t._v("（执行 BeanFactoryPostProcessor）\n"),s("ul",[s("li",[t._v("PostProcessorRegistrationDelegate#"),s("strong",[t._v("invokeBeanFactoryPostProcessors")]),t._v("(ConfigurableListableBeanFactory, List"),s("code",[t._v("<")]),t._v("BeanFactoryPostProcessor"),s("code",[t._v(">")]),t._v(")（委托PostProcessorRegistrationDelegate执行BeanFactory后置处理器）")])])]),t._v(" "),s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("registerBeanPostProcessors")]),t._v("（注册 BeanPostProcessors）\n"),s("ul",[s("li",[t._v("PostProcessorRegistrationDelegate#"),s("strong",[t._v("registerBeanPostProcessors")]),t._v("(ConfigurableListableBeanFactory, AbstractApplicationContext)（委托PostProcessorRegistrationDelegate注册Bean后置处理器）")])])]),t._v(" "),s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("initMessageSource")]),t._v("（初始化 MessageSource，主要用于 I18N 本地化的内容）")]),t._v(" "),s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("initApplicationEventMulticaster")]),t._v("（初始化事件广播 ApplicationEventMulticaster，使用观察者模式，对注册的 ApplicationEvent 事件进行捕捉）")]),t._v(" "),s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("onRefresh")]),t._v("（初始化特殊的 bean 方法）")]),t._v(" "),s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("registerListeners")]),t._v("（将所有 ApplicationEventListener 注册到 ApplicationEventMulticaster 中）")]),t._v(" "),s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("finishBeanFactoryInitialization")]),t._v("（初始化所有 lazy-init=false 的bean，singleton 实例）\n"),s("ul",[s("li",[t._v("DefaultListableBeanFactory#"),s("strong",[t._v("preInstantiateSingletons")]),t._v(" "),s("ul",[s("li",[t._v("AbstractBeanFactory#"),s("strong",[t._v("getMergedBeanDefinition")]),t._v("(String, BeanDefinition, BeanDefinition)")]),t._v(" "),s("li",[t._v("AbstractBeanFactory#"),s("strong",[t._v("doGetBean")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("AbstractAutowireCapableBeanFactory#doCreateBean")]),t._v(" "),s("ul",[s("li",[t._v("AbstractAutowireCapableBeanFactory#"),s("strong",[t._v("createBeanInstance")])]),t._v(" "),s("li",[t._v("AbstractAutowireCapableBeanFactory#"),s("strong",[t._v("populateBean")])]),t._v(" "),s("li",[t._v("AbstractAutowireCapableBeanFactory#"),s("strong",[t._v("initializeBean")]),t._v("(String, Object, RootBeanDefinition)\n"),s("ul",[s("li",[t._v("AbstractAutowireCapableBeanFactory#"),s("strong",[t._v("invokeAwareMethods")])]),t._v(" "),s("li",[t._v("AbstractAutowireCapableBeanFactory#"),s("strong",[t._v("applyBeanPostProcessorsBeforeInitialization")])]),t._v(" "),s("li",[t._v("AbstractAutowireCapableBeanFactory#"),s("strong",[t._v("invokeInitMethods")])]),t._v(" "),s("li",[t._v("AbstractAutowireCapableBeanFactory#"),s("strong",[t._v("applyBeanPostProcessorsAfterInitialization")])])])])])])])])])])])]),t._v(" "),s("li",[t._v("AbstractApplicationContext#"),s("strong",[t._v("finishRefresh")]),t._v("（初始化 lifeCycle 的bean启动。例如 quartz 的定时器，如果开启 JMX 则将 ApplicationContext 注册到上面）")])])])])])]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/spring/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8A%A0%E8%BD%BD%E6%B5%81%E7%A8%8B%E5%9B%BE.png",alt:"初始化加载流程图"}})]),t._v(" "),s("h2",{attrs:{id:"上图过程涉及一些问题-下面带着问题进行逐个分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上图过程涉及一些问题-下面带着问题进行逐个分析"}},[t._v("#")]),t._v(" 上图过程涉及一些问题，下面带着问题进行逐个分析：")]),t._v(" "),s("h2",{attrs:{id:"_1-创建-classpathxmlapplicationcontext-中间经历了什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建-classpathxmlapplicationcontext-中间经历了什么"}},[t._v("#")]),t._v(" 1. 创建 ClassPathXmlApplicationContext 中间经历了什么？")]),t._v(" "),s("h2",{attrs:{id:"_1-preparerefresh-预刷新的主要作用是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-preparerefresh-预刷新的主要作用是什么"}},[t._v("#")]),t._v(" 1. prepareRefresh 预刷新的主要作用是什么？")]),t._v(" "),s("h2",{attrs:{id:"_2-obtainfreshbeanfactory-工厂是如何创建的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-obtainfreshbeanfactory-工厂是如何创建的"}},[t._v("#")]),t._v(" 2. obtainFreshBeanFactory 工厂是如何创建的？")]),t._v(" "),s("h2",{attrs:{id:"_3-preparebeanfactory-对工程进行初始化配置-配置什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-preparebeanfactory-对工程进行初始化配置-配置什么"}},[t._v("#")]),t._v(" 3. prepareBeanFactory 对工程进行初始化配置，配置什么？")]),t._v(" "),s("h2",{attrs:{id:"_4-invokebeanfactorypostprocessors-执行工厂后置处理器-什么是-beanfactory-后置处理器-什么时机下开始执行-执行的过程的是什么-如何自定义-beanfactorypostprocessor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-invokebeanfactorypostprocessors-执行工厂后置处理器-什么是-beanfactory-后置处理器-什么时机下开始执行-执行的过程的是什么-如何自定义-beanfactorypostprocessor"}},[t._v("#")]),t._v(" 4. invokeBeanFactoryPostProcessors 执行工厂后置处理器，什么是 beanFactory 后置处理器？ 什么时机下开始执行？ 执行的过程的是什么？ 如何自定义 BeanFactoryPostProcessor？")]),t._v(" "),s("h2",{attrs:{id:"_5-registerbeanpostprocessors-注册-bean-的后置处理器-什么是-bean-的后置处理器-什么时机下开始执行-执行的过程的是什么-如何自定义-beanpostprocessor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-registerbeanpostprocessors-注册-bean-的后置处理器-什么是-bean-的后置处理器-什么时机下开始执行-执行的过程的是什么-如何自定义-beanpostprocessor"}},[t._v("#")]),t._v(" 5. registerBeanPostProcessors 注册 bean 的后置处理器，什么是 bean 的后置处理器？ 什么时机下开始执行？ 执行的过程的是什么？ 如何自定义 BeanPostProcessor？")]),t._v(" "),s("h2",{attrs:{id:"_6-finishbeanfactoryinitialization-这一步执行了什么操作-过程怎样"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-finishbeanfactoryinitialization-这一步执行了什么操作-过程怎样"}},[t._v("#")]),t._v(" 6. finishBeanFactoryInitialization 这一步执行了什么操作？ 过程怎样？")])])}),[],!1,null,null,null);a.default=e.exports}}]);