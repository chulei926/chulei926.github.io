(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{488:function(s,t,a){"use strict";a.r(t);var e=a(22),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"iptables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iptables"}},[s._v("#")]),s._v(" iptables")]),s._v(" "),a("p",[s._v("CentOS 7.0默认使用的是firewall作为防火墙，使用iptables必须重新设置一下")]),s._v(" "),a("h2",{attrs:{id:"_1-直接关闭防火墙"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-直接关闭防火墙"}},[s._v("#")]),s._v(" 1.直接关闭防火墙")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl stop firewalld        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止firewall")]),s._v("\nsystemctl disable firewalld     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止firewall开机启动")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_2-设置-iptables-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-设置-iptables-service"}},[s._v("#")]),s._v(" 2.设置 iptables service")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" iptables-services\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_3-修改规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改规则"}},[s._v("#")]),s._v(" 3. 修改规则")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 如果要修改防火墙配置，如增加防火墙端口3306")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/sysconfig/iptables \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 增加规则")]),s._v("\n-A INPUT -m state --state NEW -m tcp -p tcp --dport "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(" -j ACCEPT\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 保存退出后")]),s._v("\nsystemctl restart iptables.service  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启防火墙使配置生效")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" iptables.service   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置防火墙开机启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 最后重启系统使设置生效即可。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"端口开放规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#端口开放规则"}},[s._v("#")]),s._v(" 端口开放规则")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("单个端口")]),s._v(" "),a("ul",[a("li",[s._v("-A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT")]),s._v(" "),a("li",[s._v("-A INPUT -m state --state NEW -m tcp -p tcp --dport 27017 -j ACCEPT")])])]),s._v(" "),a("li",[a("p",[s._v("批量端口")]),s._v(" "),a("ul",[a("li",[s._v("5000:10000  表示 5000 到 10000 之间的所有端口")]),s._v(" "),a("li",[s._v(":10000   表示 10000 及以下所有端口")]),s._v(" "),a("li",[s._v("5000:   表示 5000 及以上所有端口")])])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-A INPUT -m state --state NEW -m tcp -p tcp --dport 5000:10000 -j ACCEPT\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);